@model X.PagedList.IPagedList<Young_Artists.Models.Event>
@using X.PagedList;
@using X.PagedList.Mvc.Core;
@{
	ViewData["Title"] = "List";
}
<script src="~/js/jquery-3.6.3.js"></script>
<link href="~/css/PagedList.css" rel="stylesheet" />
<div class="pagetitle">
	<h1>活動清單</h1>
</div>


<div class="card" >
	<div class="card-body">
		@using (Html.BeginForm())
		{
			<div class="my-4">
				<lable class="card-title">關鍵字</lable>
				@Html.TextBox("txtEventKeyword")
				<input type="submit" value="查詢" />
			</div>
		}
		<div class=" d-flex mb-3">
			<div class="btn-group me-3">
				<a class="nav-link dropdown-toggle text-white btn btn-primary" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
					活動管理
				</a>
				<ul class="dropdown-menu position-absolute right">
					<li><a class="dropdown-item " href="~/Event/List">回到活動列表</a></li>
					<li><a class="dropdown-item " href="~/Event/Create">建立新活動</a></li>
				</ul>
			</div>
			<div class="btn-group me-3">
				<a class="nav-link dropdown-toggle text-white btn btn-primary" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
					活動地點管理
				</a>
				<ul class="dropdown-menu position-absolute right">
					<li><a class="dropdown-item " href="~/EventLocation/List">回到活動地點列表</a></li>
					<li><a class="dropdown-item " href="~/EventLocation/Create">建立新活動地點</a></li>
				</ul>
			</div>
			<div class="btn-group me-3">
				<a class="nav-link dropdown-toggle text-white btn btn-primary" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
					活動種類管理
				</a>
				<ul class="dropdown-menu position-absolute right">
					<li><a class="dropdown-item " href="~/EventType/List">回到活動種類列表</a></li>
					<li><a class="dropdown-item " href="~/EventType/Create">建立新活動種類</a></li>
				</ul>
			</div>
		</div>
	</div>
</div>
<div class="card" >
	<div class="card-body" style="overflow:auto">
		
		
        
		<table class="table table-hover">
			<thead>
				<tr>
					<th>
					
						活動ID
						@Html.ActionLink("", "List", new { sortEvent = "UpEventId" },new {Class="bi bi-caret-up-fill",onclick="setSortCommodity('UpCommodityId')"})
						@Html.ActionLink("", "List", new { sortEvent = "DownEventId" },new {Class="bi bi-caret-down-fill",onclick="setSortCommodity('DownCommodityId')"})
					</th>
					<th>
						活動圖片
					</th>
					<th>
						活動名稱
						@Html.ActionLink("", "List", new { sortEvent = "UpEventName" },new {Class="bi bi-caret-up-fill",onclick="setSortCommodity('UpCommodityId')"})
						@Html.ActionLink("", "List", new { sortEvent = "DownEventName" },new {Class="bi bi-caret-down-fill",onclick="setSortCommodity('DownCommodityId')"})
					</th>
					<th>
						活動資訊
					</th>
					<th>
						廠商ID
						@Html.ActionLink("", "List", new { sortEvent = "UpCompanyId" },new {Class="bi bi-caret-up-fill",onclick="setSortCommodity('UpCommodityId')"})
						@Html.ActionLink("", "List", new { sortEvent = "DownCompanyId" },new {Class="bi bi-caret-down-fill",onclick="setSortCommodity('DownCommodityId')"})
					</th>
					<th>
						開始售票時間
						@Html.ActionLink("", "List", new { sortEvent = "UpEventStartSell" },new {Class="bi bi-caret-up-fill",onclick="setSortCommodity('UpCommodityId')"})
						@Html.ActionLink("", "List", new { sortEvent = "DownEventStartSell" },new {Class="bi bi-caret-down-fill",onclick="setSortCommodity('DownCommodityId')"})
					</th>
					<th>
						結束售票時間
						@Html.ActionLink("", "List", new { sortEvent = "UpEventEndSell" },new {Class="bi bi-caret-up-fill",onclick="setSortCommodity('UpCommodityId')"})
						@Html.ActionLink("", "List", new { sortEvent = "DownEventEndSell" },new {Class="bi bi-caret-down-fill",onclick="setSortCommodity('DownCommodityId')"})
					</th>
					<th>
						活動開始時間
						@Html.ActionLink("", "List", new { sortEvent = "UpEventStart" },new {Class="bi bi-caret-up-fill",onclick="setSortCommodity('UpCommodityId')"})
						@Html.ActionLink("", "List", new { sortEvent = "DownEventStart" },new {Class="bi bi-caret-down-fill",onclick="setSortCommodity('DownCommodityId')"})
					</th>
					<th>
						活動結束時間
						@Html.ActionLink("", "List", new { sortEvent = "UpEventEnd" },new {Class="bi bi-caret-up-fill",onclick="setSortCommodity('UpCommodityId')"})
						@Html.ActionLink("", "List", new { sortEvent = "DownEventEnd" },new {Class="bi bi-caret-down-fill",onclick="setSortCommodity('DownCommodityId')"})
					</th>
					<th>
						活動種類ID
						@Html.ActionLink("", "List", new { sortEvent = "UpEventType" },new {Class="bi bi-caret-up-fill",onclick="setSortCommodity('UpCommodityId')"})
						@Html.ActionLink("", "List", new { sortEvent = "DownEventType" },new {Class="bi bi-caret-down-fill",onclick="setSortCommodity('DownCommodityId')"})
					</th>
					<th>
						活動地點ID
						@Html.ActionLink("", "List", new { sortEvent = "UpEventLocation" },new {Class="bi bi-caret-up-fill",onclick="setSortCommodity('UpCommodityId')"})
						@Html.ActionLink("", "List", new { sortEvent = "DownEventLocation" },new {Class="bi bi-caret-down-fill",onclick="setSortCommodity('DownCommodityId')"})
					</th>
					<th>
						活動上架狀態
						@Html.ActionLink("", "List", new { sortEvent = "UpEventState" },new {Class="bi bi-caret-up-fill",onclick="setSortCommodity('UpCommodityId')"})
						@Html.ActionLink("", "List", new { sortEvent = "DownEventState" },new {Class="bi bi-caret-down-fill",onclick="setSortCommodity('DownCommodityId')"})
					</th>
					<th></th>
				</tr>
			</thead>
			<tbody>

				@{
					foreach (var item in Model)
					{
				
						<tr>
							<td>
								@Html.DisplayFor(modelItem => item.EventId)
							</td>
							<td>
								<img src="~/Images/@item.EventImage" width="80" height="50" />
							</td>
							<td>
								@Html.DisplayFor(modelItem => item.EventName)
							</td>
							<td>
								@Html.DisplayFor(modelItem => item.EventInfo)
							</td>
							<td>
								@Html.DisplayFor(modelItem => item.CompanyId)
							</td>
							<td>
								@Html.DisplayFor(modelItem => item.EventSellStartTimestamp)
							</td>
							<td>
								@Html.DisplayFor(modelItem => item.EventSellEndTimestamp)
							</td>
							<td>
								@Html.DisplayFor(modelItem => item.EventStartTimestamp)
							</td>
							<td>
								@Html.DisplayFor(modelItem => item.EventEndTimestamp)
							</td>
							<td>
								@Html.DisplayFor(modelItem => item.EventTypeId)
							</td>
							<td>
								@Html.DisplayFor(modelItem => item.EventLocationId)
							</td>
							<td>
								@Html.DisplayFor(modelItem => item.EventIsstate)
							</td>
							<td>
								<div class="d-flex justify-content-end">
								<div>
									@Html.ActionLink("", "Edit","Event", new { id = item.EventId } , new { @Class = "btn btn-warning bi bi-brush text-white"})
								</div>
								<div class="ms-3">
									@Html.ActionLink("", "Delete", "Event", new { id = item.EventId },new { onclick = "return confirm('是否確定要刪除此活動?')",Class = "btn btn-danger bi bi-trash3 text-white" })
								</div>
								<div class="ms-3">
									@Html.ActionLink("", "Continued", "Event", new { id = item.EventId },new { onclick = "return confirm('是否要切換上下架狀態?')", @class="btn btn-primary bi bi-arrow-down-up" })
								</div>
							</div>
								
							</td>
							
						</tr>
					}
				}
			</tbody>
		</table>
		@Html.PagedListPager(Model, page => Url.Action("List", new {sortEvent = ViewBag.sortBy, page }))

	</div>

</div>
<script>
	var sortType = "";
	let chkVal = [];
	$("#btnCheckAll").click(function () {
		chkVal = [];
		if ($("#btnCheckAll").prop("checked")) {
			$("input[name='ck']").each(function () {
				$(this).prop("checked", true);
				chkVal.push($(this).val());
			});
		} else {
			$("input[name='ck']").each(function () {
				$(this).prop("checked", false);
			});
		}
		console.log(chkVal);
		$("#chkVal1").val(JSON.stringify(chkVal));
		$("#chkVal2").val(JSON.stringify(chkVal));
		$("#chkVal3").val(JSON.stringify(chkVal));
	});
	$("input[name='ck']").change(function () {
		if ($(this).prop("checked")) {
			chkVal.push($(this).val());
		} else {
			var index = chkVal.indexOf($(this).val());
			if (index > -1) {
				chkVal.splice(index, 1);
			}
		}
		console.log(chkVal);
		$("#chkVal1").val(JSON.stringify(chkVal));
		$("#chkVal2").val(JSON.stringify(chkVal));
		$("#chkVal3").val(JSON.stringify(chkVal));
	});
	//排序分頁保存資料
	function SortEvent(SortEvent) {
		$(".sort") = SortEvent;
	}
					//測試方法
	/*function setSortCommodity(sortType) {
		$.ajax({
			type: "GET",
			url: "/Controller/Action?sortType=" + sortType,
			success: function (data) {
				// 在這裡更新頁面數據
			}
		});
	}
	*/
</script>